(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c97e316"],{"08ba":function(t,e,r){var n=r("d890"),o=r("064b"),a=r("3c10"),i=r("0fc1");for(var s in o){var c=n[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{i(u,"forEach",a)}catch(f){u.forEach=a}}},"1b6a":function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,"a",(function(){return o}))},"1c9c":function(t,e,r){},"305b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"secure"},[r("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","right-text":"退出登录","left-arrow":"",fixed:!0},on:{"click-left":t.back,"click-right":t.logout}}),r("div",{staticClass:"btns"},[r("van-button",{attrs:{type:"default",block:""},on:{click:t.showActionSheet}},[t._v("修改密码")]),r("van-button",{staticClass:"destroy",attrs:{type:"default",block:""},on:{click:t.destroyAccount}},[t._v("注销账号")])],1),r("van-action-sheet",{attrs:{title:"修改密码"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[r("van-form",{on:{submit:t.updatePassword}},[r("van-field",{attrs:{type:"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(6-16位)"},model:{value:t.userInfo.oldPassword,callback:function(e){t.$set(t.userInfo,"oldPassword",e)},expression:"userInfo.oldPassword"}}),r("van-field",{attrs:{type:"text",name:"新密码",label:"新密码",placeholder:"新密码(6-16位)"},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}}),r("div",{staticStyle:{margin:"16px"}},[r("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)],1)},o=[],a=r("cc73"),i=r("fa7d"),s={name:"Secure",data:function(){return{isShow:!1,userInfo:{oldPassword:"",password:""}}},created:function(){this.$store.state.vanTabbar=!1,this.isLogin||this.$router.push({name:"Login"})},destroyed:function(){this.$store.state.vanTabbar=!0},computed:{isLogin:function(){return this.$store.state.isLogin}},methods:{back:function(){this.$router.go(-1)},showActionSheet:function(){this.isShow=!0},updatePassword:function(){var t=this;if(this.isLogin){if(a["a"].validForm(this.userInfo,this)){if(this.userInfo.password==this.userInfo.oldPassword)return void this.$toast("新密码不能和旧密码一致");var e=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:e,oldPassword:this.userInfo.oldPassword,password:this.userInfo.password},transformRequest:i["a"].transformRequest}).then((function(e){t.$toast.clear(),"E001"===e.data.code?(t.isShow=!1,localStorage.removeItem("_t"),t.$store.commit("changeData",{key:"isLogin",value:!1}),t.$router.push({name:"Login"})):t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))}}else this.$router.push({name:"Login"})},logout:function(){var t=this;if(this.isLogin){var e=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"POST",url:"/logout",data:{appkey:this.appkey,tokenString:e},transformRequest:i["a"].transformRequest}).then((function(e){t.$toast.clear(),t.$store.commit("changeData",{key:"isLogin",value:!1}),localStorage.removeItem("_t"),t.$router.push({name:"Login"})})).catch((function(e){t.$toast.clear()}))}else this.$router.push({name:"Login"})},destroyAccount:function(){var t=this;this.isLogin?this.$dialog.confirm({title:"注销账号",message:"是否确定注销，一旦确认注销就无法恢复"}).then((function(e){if("confirm"==e){var r=localStorage.getItem("_t");t.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:r},transformRequest:i["a"].transformRequest}).then((function(e){t.$toast.clear(),localStorage.removeItem("_t"),t.$store.commit("changeData",{key:"isLogin",value:!1}),t.$router.push({name:"Login"})})).catch((function(e){t.$toast.clear()}))}})).catch((function(t){})):this.$router.push({name:"Login"})}}},c=s,u=(r("b298"),r("e90a")),f=Object(u["a"])(c,n,o,!1,null,"5efd2ca8",null);e["default"]=f.exports},"3c10":function(t,e,r){"use strict";var n=r("5dfd").forEach,o=r("d7e1"),a=r("ff9c"),i=o("forEach"),s=a("forEach");t.exports=i&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},43242:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return n}))},"5e9f":function(t,e,r){"use strict";var n=r("b2a2"),o=r("857c"),a=r("3553"),i=r("d88d"),s=r("3da3"),c=r("2732"),u=r("38eb"),f=r("59da"),l=Math.max,d=Math.min,h=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,r,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,w=m?"$":"$0";return[function(r,n){var o=c(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,n):e.call(String(o),r,n)},function(t,n){if(!m&&b||"string"===typeof n&&-1===n.indexOf(w)){var a=r(e,t,this,n);if(a.done)return a.value}var c=o(t),h=String(this),g="function"===typeof n;g||(n=String(n));var v=c.global;if(v){var y=c.unicode;c.lastIndex=0}var k=[];while(1){var S=f(c,h);if(null===S)break;if(k.push(S),!v)break;var E=String(S[0]);""===E&&(c.lastIndex=u(h,i(c.lastIndex),y))}for(var x="",I=0,P=0;P<k.length;P++){S=k[P];for(var R=String(S[0]),L=l(d(s(S.index),h.length),0),_=[],A=1;A<S.length;A++)_.push(p(S[A]));var O=S.groups;if(g){var T=[R].concat(_,L,h);void 0!==O&&T.push(O);var j=String(n.apply(void 0,T))}else j=$(R,h,L,_,O,n);L>=I&&(x+=h.slice(I,L)+j,I=L+R.length)}return x+h.slice(I)}];function $(t,r,n,o,i,s){var c=n+t.length,u=o.length,f=v;return void 0!==i&&(i=a(i),f=g),e.call(s,f,(function(e,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":s=i[a.slice(1,-1)];break;default:var f=+a;if(0===f)return e;if(f>u){var l=h(f/10);return 0===l?e:l<=u?void 0===o[l-1]?a.charAt(1):o[l-1]+a.charAt(1):e}s=o[f-1]}return void 0===s?"":s}))}}))},7063:function(t,e,r){var n=r("a719"),o=r("50fb");t.exports=function(t,e,r){var a,i;return o&&"function"==typeof(a=e.constructor)&&a!==r&&n(i=a.prototype)&&i!==r.prototype&&o(t,i),t}},"84c2":function(t,e,r){var n=r("1e2c"),o=r("d890"),a=r("e8d6"),i=r("7063"),s=r("d910").f,c=r("b338").f,u=r("8a1c"),f=r("99ad"),l=r("22ef"),d=r("1944"),h=r("efe2"),g=r("b702").set,v=r("403f"),p=r("90fb"),m=p("match"),b=o.RegExp,w=b.prototype,$=/a/g,y=/a/g,k=new b($)!==$,S=l.UNSUPPORTED_Y,E=n&&a("RegExp",!k||S||h((function(){return y[m]=!1,b($)!=$||b(y)==y||"/a/i"!=b($,"i")})));if(E){var x=function(t,e){var r,n=this instanceof x,o=u(t),a=void 0===e;if(!n&&o&&t.constructor===x&&a)return t;k?o&&!a&&(t=t.source):t instanceof x&&(a&&(e=f.call(t)),t=t.source),S&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var s=i(k?new b(t,e):b(t,e),n?this:w,x);return S&&r&&g(s,{sticky:r}),s},I=function(t){t in x||s(x,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},P=c(b),R=0;while(P.length>R)I(P[R++]);w.constructor=x,x.prototype=w,d(o,"RegExp",x)}v("RegExp")},9302:function(t,e,r){"use strict";var n=r("1c8b"),o=r("692f"),a=r("da10"),i=r("d7e1"),s=[].join,c=o!=Object,u=i("join",",");n({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},b298:function(t,e,r){"use strict";var n=r("1c9c"),o=r.n(n);o.a},cc73:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("43242"),o=r("1b6a"),a=function(){function t(){Object(n["a"])(this,t),this.phone={reg:/^1[3456789]\d{9}$/,msg:"请填写正确手机号"},this.nickName={reg:/^[0-9a-zA-Z\u4e00-\u9fa5]{1,8}$/,msg:"昵称必须含有字母,数字字母汉字组合"},this.password={reg:/^[a-zA-Z][^\u4e00-\u9fa5]{5,15}$/,msg:"密码首个字符是字母且不能含有汉字"},this.oldPassword={reg:/^[a-zA-Z][^\u4e00-\u9fa5]{5,15}$/,msg:"旧密码首个字符是字母且不能含有汉字"},this.email={reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,msg:"邮箱格式不正确"}}return Object(o["a"])(t,[{key:"validForm",value:function(t,e){for(var r in t)if(!this[r].reg.test(t[r]))return e.$toast(this[r].msg),!1;return!0}}]),t}(),i=new a},fa7d:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("fe59"),r("9302"),r("77ad"),r("e18c"),r("84c2"),r("e35a"),r("1c2e"),r("5e9f"),r("08ba");var n=r("43242"),o=r("1b6a"),a=function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,[{key:"transformRequest",value:function(t){var e="";for(var r in t)e+=r+"="+t[r]+"&";return e}},{key:"getCookies",value:function(t,e){var r={};return t.forEach((function(t){r[t]=e.$cookies.get(t)})),r}},{key:"getToken",value:function(t){var e=["t0","t1","t2"],r=[];return e.forEach((function(e){r.push(t.$cookies.get(e))})),r.join(".")}},{key:"formatDate",value:function(t,e){var r=t.getFullYear().toString();if(/(y+)/.test(e)){var n=RegExp.$1;e=e.replace(n,r.slice(r.length-n.length))}var o={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var a in o){var i=new RegExp("(".concat(a,"{1,2})"));if(i.test(e)){var s=RegExp.$1,c=o[a]>=10||1==s.length?o[a]:"0"+o[a];e=e.replace(s,c)}}return e}}]),t}(),i=new a},fe59:function(t,e,r){"use strict";var n=r("1c8b"),o=r("3c10");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})}}]);
//# sourceMappingURL=chunk-0c97e316.9d7b663c.js.map